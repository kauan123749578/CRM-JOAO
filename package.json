{
  "name": "crm-v2",
  "private": true,
  "workspaces": [
    "apps/*"
  ],
  "scripts": {
    "dev": "npm run dev -w @crm/backend",
    "build": "npm run clean && npm run build -w @crm/web && node tools/copy-web-dist.mjs && npm run prisma:generate -w @crm/backend && npm run build -w @crm/backend",
    "clean": "rm -rf apps/web/dist apps/backend/public apps/backend/dist || true",
    "start": "bash -c 'if [ -z \"$DATABASE_URL\" ] && [ -n \"$URL_DO_BANCO_DE_DADOS\" ]; then export DATABASE_URL=\"$URL_DO_BANCO_DE_DADOS\"; fi' && npm run prisma:generate -w @crm/backend && npm run db:push -w @crm/backend && npm run db:init -w @crm/backend && node apps/backend/dist/main.js",
    "copy:web": "node tools/copy-web-dist.mjs",
    "db:push": "npm run prisma:generate -w @crm/backend && npm run prisma:push -w @crm/backend",
    "db:migrate": "npm run prisma:generate -w @crm/backend && npm run prisma:migrate -w @crm/backend",
    "db:init": "npm run db:init -w @crm/backend"
  }
}
